#include <physical_layouts.dtsi>

/ {

    default_transform0: keymap_transform_0 {
        compatible = "zmk,matrix-transform";
        columns = <16>;
        rows = <5>;

/*
| SW1  SW2  SW3  SW4  SW5  SW6  |         | SW7  SW8  SW9  SW10 SW11 SW12 |
| SW13 SW14 SW15 SW16 SW17 SW18 |         | SW19 SW20 SW21 SW22 SW23 SW24 |
| SW25 SW26 SW27 SW28 SW29 SW30 |         | SW31 SW32 SW33 SW34 SW35 SW36 |
| SW37 SW38 SW39 SW40 SW41 SW42 |         | SW43 SW44 SW45 SW46 SW47 SW48 |
|      SW49 SW50 SW51 SW52 SW53 |         | SW54 SW55 SW56                |
*/

        map = <
RC(0,0) RC(0,1) RC(0,2) RC(0,3) RC(0,4) RC(0,5)                 RC(0,6) RC(0,7) RC(0,8)  RC(0,9) RC(0,10) RC(0,11)
RC(1,0) RC(1,1) RC(1,2) RC(1,3) RC(1,4) RC(1,5)                 RC(1,6) RC(1,7) RC(1,8)  RC(1,9) RC(1,10) RC(1,11)
RC(2,0) RC(2,1) RC(2,2) RC(2,3) RC(2,4) RC(2,5)                 RC(2,6) RC(2,7) RC(2,8)  RC(2,9) RC(2,10) RC(2,11)
RC(3,0) RC(3,1) RC(3,2) RC(3,3) RC(3,4) RC(3,5)                 RC(3,6) RC(3,7) RC(3,8)  RC(3,9) RC(3,10) RC(3,11)
        RC(4,1) RC(4,2) RC(4,3) RC(4,4) RC(4,5)                 RC(4,6) RC(4,7) RC(4,8)
        >;
    };

    physical_layout0: physical_layout_0 {
        compatible = "zmk,physical-layout";
        display-name = "charybdis";

        kscan = <&kscan0>;
        transform = <&default_transform0>;

        keys  //                     w   h    x    y     rot    rx    ry

            /* --- Main matrix rows unchanged (4x6 per half) --- */

            /* Row 1 */
            = <&key_physical_attrs 100 100    0   37 0 0 0>
            , <&key_physical_attrs 100 100  100   25 0 0 0>
            , <&key_physical_attrs 100 100  200   12 0 0 0>
            , <&key_physical_attrs 100 100  300    0 0 0 0>
            , <&key_physical_attrs 100 100  400   12 0 0 0>
            , <&key_physical_attrs 100 100  500   25 0 0 0>

            , <&key_physical_attrs 100 100  900   25 0 0 0>
            , <&key_physical_attrs 100 100 1000   12 0 0 0>
            , <&key_physical_attrs 100 100 1100    0 0 0 0>
            , <&key_physical_attrs 100 100 1200   12 0 0 0>
            , <&key_physical_attrs 100 100 1300   25 0 0 0>
            , <&key_physical_attrs 100 100 1400   37 0 0 0>

            /* Row 2 */
            , <&key_physical_attrs 100 100    0  137 0 0 0>
            , <&key_physical_attrs 100 100  100  125 0 0 0>
            , <&key_physical_attrs 100 100  200  112 0 0 0>
            , <&key_physical_attrs 100 100  300  100 0 0 0>
            , <&key_physical_attrs 100 100  400  112 0 0 0>
            , <&key_physical_attrs 100 100  500  125 0 0 0>

            , <&key_physical_attrs 100 100  900  125 0 0 0>
            , <&key_physical_attrs 100 100 1000  112 0 0 0>
            , <&key_physical_attrs 100 100 1100  100 0 0 0>
            , <&key_physical_attrs 100 100 1200  112 0 0 0>
            , <&key_physical_attrs 100 100 1300  125 0 0 0>
            , <&key_physical_attrs 100 100 1400  137 0 0 0>

            /* Row 3 */
            , <&key_physical_attrs 100 100    0  237 0 0 0>
            , <&key_physical_attrs 100 100  100  225 0 0 0>
            , <&key_physical_attrs 100 100  200  212 0 0 0>
            , <&key_physical_attrs 100 100  300  200 0 0 0>
            , <&key_physical_attrs 100 100  400  212 0 0 0>
            , <&key_physical_attrs 100 100  500  225 0 0 0>

            , <&key_physical_attrs 100 100  900  225 0 0 0>
            , <&key_physical_attrs 100 100 1000  212 0 0 0>
            , <&key_physical_attrs 100 100 1100  200 0 0 0>
            , <&key_physical_attrs 100 100 1200  212 0 0 0>
            , <&key_physical_attrs 100 100 1300  225 0 0 0>
            , <&key_physical_attrs 100 100 1400  237 0 0 0>

            /* Row 4 */
            , <&key_physical_attrs 100 100    0  337 0 0 0>
            , <&key_physical_attrs 100 100  100  325 0 0 0>
            , <&key_physical_attrs 100 100  200  312 0 0 0>
            , <&key_physical_attrs 100 100  300  300 0 0 0>
            , <&key_physical_attrs 100 100  400  312 0 0 0>
            , <&key_physical_attrs 100 100  500  325 0 0 0>

            , <&key_physical_attrs 100 100  900  325 0 0 0>
            , <&key_physical_attrs 100 100 1000  312 0 0 0>
            , <&key_physical_attrs 100 100 1100  300 0 0 0>
            , <&key_physical_attrs 100 100 1200  312 0 0 0>
            , <&key_physical_attrs 100 100 1300  325 0 0 0>
            , <&key_physical_attrs 100 100 1400  337 0 0 0>

            /* --- Left thumb cluster (5 keys) --- */
            , <&key_physical_attrs 100 100  200  450 0 0 0>
            , <&key_physical_attrs 100 100  300  430 1200 300 430>
            , <&key_physical_attrs 100 150  400  410 2400 400 460>
            , <&key_physical_attrs 100 100  500  430 (-1200) 600 430>
            , <&key_physical_attrs 100 100  600  450 0 0 0>

            /* --- Right thumb cluster (3 keys only) --- */
            , <&key_physical_attrs 100 100  950  440 0 0 0>
            , <&key_physical_attrs 100 150 1050  410 (-2400) 1050 460>
            , <&key_physical_attrs 100 100 1150  440 0 0 0>
            ;
    };
};
